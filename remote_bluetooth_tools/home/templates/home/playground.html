{% extends 'home/base.html' %}

{% block content %}
<h1>Playground</h1>
<h2>{{ name }}</h2>
<table class="table">
    <thead>
        <tr>
            <th>Device Name</th>
            <th>Device Type</th>
            <th>Device MAC</th>
            <th>Creation Date</th>
        </tr>
    </thead>
    <tbody>
        {% for device in devices %}
        <tr>
            <td>{{ device.device_name }}</td>
            <td>{{ device.device_type }}</td>
            <td>{{ device.device_mac }}</td>
            <td>{{ device.creation_date }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<div>
    <h2 id="app"></h2>
</div>
<script>
    var socket = new WebSocket('ws://127.0.0.1:8000/ws/app/');

    socket.onmessage = function(event){
        var data = JSON.parse(event.data);
        console.log(data);
        document.querySelector('#app').innerText = data.message;
    }
</script>
{% endblock %}